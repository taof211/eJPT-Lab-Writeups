---
tags:
  - lab
  - red_team
  - SMB
  - t1557_001
  - t1557_002
  - t1550_002
module: Host and Networking Penetration Test
topic: Network Penetration Testing
date: 2025-11-02
status: completed
---
# Objective

**The assumptions of this security engagement are:**

1. You are going to do an internal penetration test, where you will be connected directly into their LAN network **172.16.5.0/24**. The scope in this test is only the **172.16.5.0/24**segment
2. You are in a production network, so you should not lock any user account by guessing their usernames and passwords

Your mission is to: 
- Exploitation using **SMB Relay Attack**
- Manipulating network traffic with **dnsspoof**

# Walkthrough

- Launch msfconsole and start `smb_relay`module

  <img width="1486" height="713" alt="2-3  DNS and SMB Relay Attack smb_relay 1" src="https://github.com/user-attachments/assets/4c0c75f7-1088-4e2c-8703-bf1a070d016e" />
  <img width="708" height="192" alt="2-3  DNS and SMB Relay Attack smb_relay 2" src="https://github.com/user-attachments/assets/db181216-4916-48fa-860c-7b38c13fdaa8" />

- Use `dnsspoof` conduct DNS spoofing attack

  <img width="892" height="200" alt="2-3  DNS and SMB Relay Attack dns spoofing" src="https://github.com/user-attachments/assets/2a18bcd7-200e-436f-8af2-e367ad7a7f10" />

- Configure IP forwarding and use `arpspoof` to conduct ARP spoofing attack

  <img width="1035" height="340" alt="2-3  DNS and SMB Relay Attack arp spoofing" src="https://github.com/user-attachments/assets/fd4a7193-d4c5-46e4-9842-0dd67926cdc7" />
  <img width="903" height="370" alt="2-3  DNS and SMB Relay Attack arp spoofing 2" src="https://github.com/user-attachments/assets/13ae7c33-df7e-4907-8493-6f400b615a82" />

- Gain access to the target host

  <img width="1478" height="478" alt="2-3  DNS and SMB Relay Attack meterpreter access" src="https://github.com/user-attachments/assets/3eaeb981-cbac-47ef-81e2-1dcefb04842d" />
