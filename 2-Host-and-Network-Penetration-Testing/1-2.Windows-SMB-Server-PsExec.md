---
tags:
  - lab
  - ctf
  - red_team
  - SMB
  - PsExec
module: Host and Networking Penetration Test
topic: System and Host Based Attacks
date: 2025-10-23
status: completed
---
# Objective

Exploit the SMB service to get a meterpreter session on the target and retrieve the flag!

# Walkthrough

- Ran `ifconfig` and `ping -c 1 demo.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target machine is online and pingable
	- The machines aren't in the same subnet

  <img width="1031" height="458" alt="1-2  Windows SMB Server PsExec ifconfig" src="https://github.com/user-attachments/assets/f35b555f-c0b3-404b-ab28-cb21e5ff8027" />
  <img width="943" height="225" alt="1-2  Windows SMB Server PsExec ping" src="https://github.com/user-attachments/assets/78375436-81bd-4573-9390-289df47d57f5" />

- Ran initial scan with nmap, `nmap -Pn -sS -sT -p139,445 -sC -T4 demo.ine.local`

  <img width="1163" height="564" alt="1-2  Windows SMB Server PsExec nmap" src="https://github.com/user-attachments/assets/4c0250d6-3465-4579-a2e6-16c37c66fee3" />

- Launch and set up msfconsole initially

  <img width="662" height="236" alt="1-2  Windows SMB Server PsExec msfconsole setup" src="https://github.com/user-attachments/assets/b7d7abd8-2846-4a54-b62f-9719dd621f7c" />

- Use `auxiliary/scanner/smb/smb_login` module to get credentials via brute forcing

  <img width="1450" height="677" alt="1-2  Windows SMB Server PsExec smb login" src="https://github.com/user-attachments/assets/11d88386-5fa5-41ca-83f3-14904f7773bd" />

- Use `exploit/windows/smb/psexec` module to access the machine.

  <img width="1478" height="670" alt="1-2  Windows SMB Server PsExec exploit" src="https://github.com/user-attachments/assets/8c9c6f13-5ea0-49fa-953a-61972a3577f8" />

- Get a shell and find the flag.

  <img width="800" height="706" alt="1-2  Windows SMB Server PsExec flag" src="https://github.com/user-attachments/assets/68769735-fa88-410c-a1e2-62bb78d494c7" />

# Key Finds

- Flag e0da81a9cd42b261bc9b90d15f780433
