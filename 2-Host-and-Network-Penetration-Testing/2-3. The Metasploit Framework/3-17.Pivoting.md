---
tags:
  - lab
  - red_team
  - pivoting
  - msfconsole
module: Host and Networking Penetration Test
topic: The Metasploit Framework
date: 2025-11-06
status: in-progress
---
# Objective

Exploit vulnerabilities in the target machines to gain access and retrieve a flag.

# Walkthrough

- Ran `ifconfig` and `ping -c 1 demo1.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target machine is online and pingable
	- The machines aren't in the same subnet

    <img width="746" height="390" alt="3-17  Pivoting ifconfig" src="https://github.com/user-attachments/assets/1d7212a0-787e-45d0-a291-c617b5bd04f2" />
    <img width="843" height="198" alt="3-17  Pivoting ping" src="https://github.com/user-attachments/assets/37c91472-c56a-4e22-ae51-389700f8fb39" />

- Conduct an nmap scanning against the target 1

  <img width="1080" height="750" alt="3-17  Pivoting nmap 1" src="https://github.com/user-attachments/assets/61e30f1e-b113-4d1c-9c72-48189d5e444b" />

- Launch and set up msfconsole

  <img width="667" height="324" alt="3-17  Pivoting msf setup" src="https://github.com/user-attachments/assets/c0000c15-41eb-427d-8d76-75d3e621b441" />

- Use `rejetto_hfs_exec` module to exploit the vulnerable service

  <img width="1021" height="486" alt="3-17  Pivoting exploit" src="https://github.com/user-attachments/assets/b615c7a8-7361-4173-b8d6-7469cc4b0fc3" />

- Find the network information

  <img width="1012" height="702" alt="3-17  Pivoting network info" src="https://github.com/user-attachments/assets/930dc9dd-9432-4056-bf04-1d705129d5f9" />

- Add the subnet to autoroute

  <img width="960" height="455" alt="3-17  Pivoting autoroute" src="https://github.com/user-attachments/assets/87de9a8e-4922-4b18-9c5e-4d81528ac2cd" />

- Use `portscan/tcp` module to conduct port scan against the target 2

  <img width="766" height="247" alt="3-17  Pivoting port scan" src="https://github.com/user-attachments/assets/88e63cfc-f259-49bf-b970-993499de10d9" />

- Set up port forward

  <img width="1440" height="412" alt="3-17  Pivoting portfwd" src="https://github.com/user-attachments/assets/a86dfc15-7d18-4055-86e7-076a44e2b11a" />

- Conduct an nmap scan against port 80 of the target 2

  <img width="973" height="288" alt="3-17  Pivoting nmap 2" src="https://github.com/user-attachments/assets/417c6c08-bd73-4a1f-b0ec-1512271bfc6e" />

- Exploit the vulnerable service on the target 2

  <img width="1228" height="251" alt="3-17  Pivoting exploit 2" src="https://github.com/user-attachments/assets/0f250c26-558a-4f1f-8600-d12ae8af9e83" />

- Obtain the flag
  
  <img width="1134" height="622" alt="3-17  Pivoting flag" src="https://github.com/user-attachments/assets/675cb911-6c61-456f-84f1-e28ffc493a08" />

# Key Finds

- FLAG: c46d12f28d87ae0b92b05ebd9fb8e817
