---
tags:
  - lab
  - red_team
  - persistence
  - msfconsole
module: Host and Networking Penetration Test
topic: The Metasploit Framework
date: 2025-11-08
status: completed
---
# Objective

Escalate to the root user on the target machine and retrieve the flag!

**SSH Login Credentials:**

| Username | Password | | jackie | password |

# Walkthrough

- Conduct an nmap scan

  <img width="1034" height="601" alt="3-21  Establishing Persistence On Linux nmap" src="https://github.com/user-attachments/assets/f06805c2-a6e2-42c3-852a-4bfbf6478443" />

- Access the target machine with given credential

  <img width="1496" height="667" alt="3-21  Establishing Persistence On Linux ssh access" src="https://github.com/user-attachments/assets/df72f6fe-c0ec-4a66-84f8-b07cbc8b8f0c" />

- Identified a vulnerable process on the target machine

  <img width="1131" height="624" alt="3-21  Establishing Persistence On Linux chkrootkit" src="https://github.com/user-attachments/assets/dd65716c-bd1b-45de-986d-f6bdf9349ed0" />

- Use `chkrootkit` module to exploit the vulnerable process and escalate our permission

  <img width="1070" height="430" alt="3-21  Establishing Persistence On Linux root" src="https://github.com/user-attachments/assets/d1a8acd8-9e36-49cb-8133-a64ad8baca96" />

- Now we gonna use `sshkey_persistence` module to persist our access

  <img width="1079" height="691" alt="3-21  Establishing Persistence On Linux sshkey" src="https://github.com/user-attachments/assets/6666e4c6-1b84-4105-9bc9-fc1abdfb00ec" />

- Now we will access the victim with the SSH Key

  <img width="1064" height="723" alt="3-21  Establishing Persistence On Linux persistence" src="https://github.com/user-attachments/assets/0fb29438-2ba9-450b-9df7-9da8f896562d" />

- Get the flag

  <img width="608" height="146" alt="3-21  Establishing Persistence On Linux flag" src="https://github.com/user-attachments/assets/58438927-f9f8-4509-8d3f-df68e6a3da49" />
