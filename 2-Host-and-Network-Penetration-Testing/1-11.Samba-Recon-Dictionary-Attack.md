---
tags:
  - lab
  - red_team
  - SMB
  - samba
  - brute_force
module: Host and Networking Penetration Test
topic: System and Host Based Attacks
date: 2025-10-30
status: completed
---
# Objective

 Answer the following questions:

1. What is the password of user “jane” required to access share “jane”? Use smb_login metasploit module with password wordlist /usr/share/wordlists/metasploit/unix_passwords.txt
2. What is the password of user “admin” required to access share “admin”? Use hydra with password wordlist: /usr/share/wordlists/rockyou.txt
3. Which share is read only? Use smbmap with credentials obtained in question 2.
4. Is share “jane” browseable? Use credentials obtained from the 1st question.
5. Fetch the flag from share “admin”
6. List the named pipes available over SMB on the samba server? Use pipe_auditor metasploit module with credentials obtained from question 2.
7. List sid of Unix users shawn, jane, nancy and admin respectively by performing RID cycling using enum4Linux with credentials obtained in question 2.

# Walkthrough

- Ran `ifconfig` and `ping -c 1 demo.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target machine is online and pingable
	- The machines are in the same subnet

  <img width="940" height="439" alt="1-11  Samba Recon Dictionary Attack ifconfig" src="https://github.com/user-attachments/assets/6df5ec4b-d550-4231-bf21-7f411f7202ff" />
  <img width="952" height="213" alt="1-11  Samba Recon Dictionary Attack ping" src="https://github.com/user-attachments/assets/191f0441-902c-45c2-b555-13eefd958770" />

- Conduct a nmap scan

  <img width="1314" height="691" alt="1-11  Samba Recon Dictionary Attack nmap 1" src="https://github.com/user-attachments/assets/de667dc9-1140-465f-9766-2000f1d5fd72" />
  <img width="1244" height="759" alt="1-11  Samba Recon Dictionary Attack nmap 2" src="https://github.com/user-attachments/assets/c78294cc-c6aa-4af3-899e-30082eff6123" />

- Use `smb_login` metasploit module to conduct brute force attack to get jane's password

  <img width="1470" height="408" alt="1-11  Samba Recon Dictionary Attack smb login" src="https://github.com/user-attachments/assets/1bb3db19-ad73-42db-9737-26f07f74eabc" />

- Use hydra to conduct brute force attack to get admin's password

  <img width="1486" height="381" alt="1-11  Samba Recon Dictionary Attack hydra-1" src="https://github.com/user-attachments/assets/982cb2a7-e069-4fef-96b8-b1c77878f600" />

- Use `smbmap` to obtain shares' information

  <img width="1299" height="666" alt="1-11  Samba Recon Dictionary Attack smbmap" src="https://github.com/user-attachments/assets/ba1c34f0-d7ba-4c5f-a239-bc179c95936c" />

- Access the smb share admin with smbclient, and find and download the flag file

  <img width="1368" height="503" alt="1-11  Samba Recon Dictionary Attack smbclient" src="https://github.com/user-attachments/assets/4b63031d-b322-4d89-aaed-e2df6465f192" />

- Obtain the flag

  <img width="910" height="310" alt="1-11  Samba Recon Dictionary Attack flag" src="https://github.com/user-attachments/assets/d38b5565-7456-40b2-9f36-a7f8b25459d6" />

- Use `pipe_auditor` module in msfconsole to get requested information

  <img width="911" height="281" alt="1-11  Samba Recon Dictionary Attack pipe auditor" src="https://github.com/user-attachments/assets/408bf8cd-2b85-4b35-88f8-217bc305e5b9" />

- Enumerate with `enum4linux` as requested

  <img width="1485" height="708" alt="1-11  Samba Recon Dictionary Attack enum4linux" src="https://github.com/user-attachments/assets/8a0d2d7a-cf2e-453b-8821-0a2215b1334f" />

# Key Finds

- FLAG 2727069bc058053bd561ce372721c92e
