---
tags:
  - lab
  - red_team
  - msfconsole
  - post_exploit
module: Host and Networking Penetration Test
topic: The Metasploit Framework
date: 2025-11-05
status: completed
---
# Objective

Exploit the SMB service with PsExec and retrieve the flag.

# Walkthrough

- Ran `ifconfig` and `ping -c 1 demo.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target machine is online and pingable
	- The machines aren't in the same subnet

    <img width="721" height="385" alt="3-13  Exploiting SMB With PsExec ifconfig" src="https://github.com/user-attachments/assets/da253b5c-d190-4e45-b8b5-bf4663038676" />
    <img width="815" height="192" alt="3-13  Exploiting SMB With PsExec ping" src="https://github.com/user-attachments/assets/1d3e6f80-59a2-4f65-844f-e6c04634b9ed" />

- Conduct an nmap scan

  <img width="1221" height="750" alt="3-13  Exploiting SMB With PsExec nmap" src="https://github.com/user-attachments/assets/77870c04-e41a-4027-b0d1-f4488fe937aa" />

- Launch and set up msfconsole

  <img width="1101" height="724" alt="3-13  Exploiting SMB With PsExec msf setup" src="https://github.com/user-attachments/assets/0b3d2892-8409-41e1-88e4-283c8dc34396" />

- Use `smb_login` module to conduct a brute force attack

  <img width="1195" height="364" alt="3-13  Exploiting SMB With PsExec brute force" src="https://github.com/user-attachments/assets/fc4f8ccb-5467-4f56-8a3d-b2365a265a26" />
  <img width="1111" height="272" alt="3-13  Exploiting SMB With PsExec sessions" src="https://github.com/user-attachments/assets/e319864f-5a63-40ab-987d-388f72a26ca7" />
  
- Use `smb/psexec` module to gain access to Meterpreter shell

  <img width="1196" height="550" alt="3-13  Exploiting SMB With PsExec exploit" src="https://github.com/user-attachments/assets/396842ed-b25a-4056-ba70-7d3fab762f3b" />

- Use `hashdump` command to dump hashes

  <img width="916" height="155" alt="3-13  Exploiting SMB With PsExec hashes" src="https://github.com/user-attachments/assets/2760854e-27c4-44c9-8e8f-e12c107862bf" />

- Get flag

  <img width="667" height="498" alt="3-13  Exploiting SMB With PsExec flag" src="https://github.com/user-attachments/assets/9a1f15b1-d667-4409-bddb-422d082adb3e" />
