---
tags:
  - lab
  - ctf
  - red_team
  - msfconsole
module: Host and Networking Penetration Test
topic: The Metasploit Framework
date: 2025-11-05
status: completed
---
# Objective

Using various exploration techniques, complete the following tasks to capture the associated flags:

- **Flag 1:** Enumerate the open port using Metasploit, and inspect the RSYNC banner closely; it might reveal something interesting.
- **Flag 2:** The files on the RSYNC server hold valuable information. Explore the contents to find the flag.
- **Flag 3:** Try exploiting the webapp to gain a shell using Metasploit on target2.ine.local.
- **Flag 4:** Automated tasks can sometimes leave clues. Investigate scheduled jobs or running processes to uncover the hidden flag.

# Walkthrough

- Ran `ifconfig` and `ping -c 1 target1.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target 1 machine is online and pingable
	- The machines are in the same subnet

    <img width="950" height="427" alt="3-8  The Metasploit Framework CTF 2 ifconfig" src="https://github.com/user-attachments/assets/aee39106-965b-4254-86d7-3cd9ec0baeaa" />
    <img width="1007" height="212" alt="3-8  The Metasploit Framework CTF 2 ping" src="https://github.com/user-attachments/assets/1a71f1d3-1416-4e55-ab54-7f37d22048bf" />

- Conduct an nmap scan

  <img width="1098" height="317" alt="3-8  The Metasploit Framework CTF 2 nmap" src="https://github.com/user-attachments/assets/3dba68f8-24e2-4f24-9ff9-5d49e0df92be" />

- Though failed to enumerate rsync module with NSE script, manually check with `rsync` succeeds and obtain the flag 1

  <img width="967" height="383" alt="3-8  The Metasploit Framework CTF 2 flag 1" src="https://github.com/user-attachments/assets/c1fb33bf-77c4-454f-849f-95ae46401f29" />

- Downloaded the content of `backupwscohen` with `rsync` command

  <img width="1039" height="659" alt="3-8  The Metasploit Framework CTF 2 download 1" src="https://github.com/user-attachments/assets/fc932d7f-18fb-4e43-b1d6-7a292beddc52" />
  <img width="1357" height="311" alt="3-8  The Metasploit Framework CTF 2 download 2" src="https://github.com/user-attachments/assets/4f56c5d4-c709-4692-9fe9-d56ff5c12939" />

- Obtained the flag 2

  <img width="1344" height="286" alt="3-8  The Metasploit Framework CTF 2 flag 2" src="https://github.com/user-attachments/assets/533812df-353b-47f3-9cc7-400fbea48e2c" />

- Ping target 2 and found it's online and in the same subnet with the attack machine

  <img width="1135" height="219" alt="3-8  The Metasploit Framework CTF 2 ping 2" src="https://github.com/user-attachments/assets/ec1335ef-7fbc-4479-a4af-2235d8b60418" />

- Conduct an nmap against it

  <img width="1413" height="716" alt="3-8  The Metasploit Framework CTF 2 nmap 2" src="https://github.com/user-attachments/assets/2bc3da47-3a39-4fb6-9372-66af3f453e59" />

- Launch and set up msfconsole

  <img width="658" height="468" alt="3-8  The Metasploit Framework CTF 2 msf setup-1" src="https://github.com/user-attachments/assets/163e85cd-f7d2-46da-8871-b8d6a8086730" />

- Use `roxy_wi_exec` module to exploit the vulnerable web app and gain a shell.

  <img width="1476" height="542" alt="3-8  The Metasploit Framework CTF 2 exploit" src="https://github.com/user-attachments/assets/bc95f534-4713-471d-800c-d2a098e31d85" />

- Get and bash shell, browse the file system and found the flag 3

  <img width="786" height="739" alt="3-8  The Metasploit Framework CTF 2 flag 3" src="https://github.com/user-attachments/assets/766693f9-63c3-4894-a09a-f66a3552d5ac" />

- Check the cron jobs and found the flag 4

  <img width="1218" height="523" alt="3-8  The Metasploit Framework CTF 2 flag 4" src="https://github.com/user-attachments/assets/db209a94-b122-4758-94b5-86873f10d89c" />

# Key Finds

- Flag 1: dfbcd7eed9344fbdb2c1ed4af962809c
- Flag 2: c82a2c83fe454b879232127d7baaf513
- Flag 3: e27ceeda825941c6a608abf92220aa5c
- Flag 4: 3b4afcc2d74b40868d3b4ad57356218e
