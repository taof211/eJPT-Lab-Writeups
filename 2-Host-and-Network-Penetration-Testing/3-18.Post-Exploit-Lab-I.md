---
tags:
  - lab
  - red_team
  - post_exploit
  - msfconsole
module: Host and Networking Penetration Test
topic: The Metasploit Framework
date: 2025-11-06
status: completed
---
# Objective

Use the following modules to conduct post exploit information enumeration, including configurations, network details, environment variables, and user history, while also assessing system protections and executing commands remotely.
- post/linux/gather/enum_configs
- post/multi/gather/env
- post/linux/gather/enum_network
- post/linux/gather/enum_protections
- post/linux/gather/enum_system
- post/linux/gather/checkcontainer
- post/linux/gather/checkvm
- post/linux/gather/enum_users_history
- post/multi/manage/system_session
- post/linux/manage/download_exec

# Walkthrough

- Exploit the vulnerable service on the host

  <img width="1426" height="322" alt="3-18  Post Exploit Lab I exploit" src="https://github.com/user-attachments/assets/848019e1-8acb-44d3-8d12-f90bf3f7536f" />

- Upgrade session

  <img width="1455" height="490" alt="3-18  Post Exploit Lab I upgrade" src="https://github.com/user-attachments/assets/584450ed-7d41-4a77-8b8d-d4ad7a335685" />

- Use `enum_configs` to enumerate configuration files on the target host

  <img width="1494" height="739" alt="3-18  Post Exploit Lab I config" src="https://github.com/user-attachments/assets/41ac9264-1c76-4d7c-850c-d8d2231c16b4" />

- Use `gether/env` module to gather environment setting

  <img width="1484" height="558" alt="3-18  Post Exploit Lab I env" src="https://github.com/user-attachments/assets/4b0f2375-b626-4f6b-8230-48689d1c285a" />

- Use `enum_network` module to enumerate network information on the target host

  <img width="1487" height="537" alt="3-18  Post Exploit Lab I network" src="https://github.com/user-attachments/assets/53658179-d34c-43d7-b47d-61ac3ff4f5f5" />

- Use `enum_protections` modules to enumerate protection information

  <img width="1487" height="457" alt="3-18  Post Exploit Lab I protection" src="https://github.com/user-attachments/assets/a46a350c-36c7-4513-8674-8b15ceecbddc" />

- Use `enum_system` module to enumerate the system and user information

  <img width="1486" height="387" alt="3-18  Post Exploit Lab I system" src="https://github.com/user-attachments/assets/a2f8c2d0-ef80-42cc-9d61-1fce8267216c" />

- Use `checkcontainer` and `checkvm` modules to check if the host is running in a container or VM

  <img width="669" height="127" alt="3-18  Post Exploit Lab I container" src="https://github.com/user-attachments/assets/245a64e0-917f-43e7-b396-3dc26f3d2fa6" />
  <img width="1082" height="162" alt="3-18  Post Exploit Lab I vm" src="https://github.com/user-attachments/assets/5c16f39c-63e3-4c84-8752-52aff243ab7e" />

- Use `enum_users_history` module to gathers user specific information

  <img width="1477" height="399" alt="3-18  Post Exploit Lab I users" src="https://github.com/user-attachments/assets/a804e1b9-4443-4f64-901b-9ed523e8c4cb" />

- Use `system_session` module to create a new python session

  <img width="1451" height="657" alt="3-18  Post Exploit Lab I session" src="https://github.com/user-attachments/assets/3e80dc94-a674-428a-b617-96d20b70d393" />

- Start Apache2 and copy a bash script into `/var/www/html`

  <img width="930" height="162" alt="3-18  Post Exploit Lab I apache" src="https://github.com/user-attachments/assets/a4999e00-233f-4aec-bb12-5cc66538e6af" />

- Use `download_exec` module to download it to the target machine

  <img width="967" height="225" alt="3-18  Post Exploit Lab I download" src="https://github.com/user-attachments/assets/5a3bd587-b9ec-4736-8108-d1c4aa4fdd1a" />

- Verification of shell execution

  <img width="1050" height="557" alt="3-18  Post Exploit Lab I ver 1" src="https://github.com/user-attachments/assets/fc60efb4-323f-43b5-9f7e-8c5d484975f4" />
  <img width="1162" height="695" alt="3-18  Post Exploit Lab I ver 2" src="https://github.com/user-attachments/assets/99b446a3-3f63-4ff2-a064-7b1777f8ccf1" />
