---
tags:
  - lab
  - red_team
  - post_exploit
module: Host and Networking Penetration Test
topic: The Metasploit Framework
date: 2025-11-08
status: completed
---
# Objective

To exploit a vulnerable file-sharing service and utilize Metasploit post-exploitation modules to achieve system compromise, credential harvesting, and persistent access. Exploit it and run the following post modules on the target:
- post/multi/gather/ssh_creds
- post/multi/gather/docker_creds
- post/linux/gather/hashdump
- post/linux/gather/ecryptfs_creds
- post/linux/gather/enum_psk
- post/linux/gather/enum_hexchat
- post/linux/gather/phpmyadmin_credsteal
- post/linux/gather/pptpd_chap_secrets
- post/linux/manage/sshkey_persistence

# Walkthrough

- Conduct an nmap scan against the target machine

  <img width="1028" height="629" alt="3-20  Post Exploitation Lab II nmap" src="https://github.com/user-attachments/assets/1330957c-a19c-4989-b3eb-df112d120248" />

- Launch msfconsole and use `is_knwon_pipename` module to exploit the vulnerable service

  <img width="1215" height="665" alt="3-20  Post Exploitation Lab II exploit" src="https://github.com/user-attachments/assets/84693009-1e08-498a-9755-cdf15fed1439" />

- Use `ssh_creds` module to dump ssh credentials

  <img width="1268" height="625" alt="3-20  Post Exploitation Lab II ssh_creds" src="https://github.com/user-attachments/assets/a604b40e-3c41-4810-8f1e-e389a9913f5e" />

- Use `docker_creds` to dump docker credentials

  <img width="893" height="325" alt="3-20  Post Exploitation Lab II docker_creds" src="https://github.com/user-attachments/assets/8ea96512-2654-4158-a15b-99b6a4c26ef5" />

- Use `hashdump` module to dump hashes

  <img width="801" height="330" alt="3-20  Post Exploitation Lab II hashdump" src="https://github.com/user-attachments/assets/d8c823ec-593d-4c44-b790-1b5f097d55e9" />

- Use `ecryptfs_creds` modules

  <img width="1030" height="536" alt="3-20  Post Exploitation Lab II ecryptfs_creds" src="https://github.com/user-attachments/assets/59e74752-2ef2-4986-908b-1df3be28ee40" />

- Use `enum_psk` module to dump wireless network credentials

  <img width="1223" height="697" alt="3-20  Post Exploitation Lab II wireless" src="https://github.com/user-attachments/assets/5fccec2e-7798-4445-8ca3-fd555397d2d8" />

- Use module `enum_hexchat`

  <img width="1246" height="655" alt="3-20  Post Exploitation Lab II enum_hexchat" src="https://github.com/user-attachments/assets/839d36c7-cbf4-47ac-843a-7ee63ab7a67e" />

- Use `phpmyadmin_credsteal` module to dump phpmyadmin credentials

  <img width="1052" height="534" alt="3-20  Post Exploitation Lab II phpadmin creds" src="https://github.com/user-attachments/assets/fa2b7a26-8e97-48a8-b2ae-84a5a27e743a" />

- Use `pptpd_chap_secrets`module to grab PPTP VPN's information

  <img width="1018" height="624" alt="3-20  Post Exploitation Lab II PPTP VPN" src="https://github.com/user-attachments/assets/865bccb6-79cc-40f0-840f-09ea52fb5a7f" />

- Use `sshkey_persistence` module to add a SSH key to an user, which will allow use to access the machine with SSH anytime

  <img width="1047" height="536" alt="3-20  Post Exploitation Lab II ssh key" src="https://github.com/user-attachments/assets/f3f0ec29-8746-45ab-9c3d-42ce947969f0" />

