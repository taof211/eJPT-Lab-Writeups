---
tags:
  - lab
  - red_team
  - enumeration
  - msfconsole
  - netcat
module: Assessment Methodologies
topic: Enumeration
date: 2025-10-17
status: completed
---
# Objective

Answer the following questions:

1. What is the SMTP server name and banner.
2. Connect to SMTP service using netcat and retrieve the hostname of the server (domain name).
3. Does user “admin” exist on the server machine? Connect to SMTP service using netcat and check manually.
4. Does user “commander” exist on the server machine? Connect to SMTP service using netcat and check manually.
5. What commands can be used to check the supported commands/capabilities? Connect to SMTP service using telnet and check.
6. How many of the common usernames present in the dictionary /usr/share/commix/src/txt/usernames.txt exist on the server. Use smtp-user-enum tool for this task.
7. How many common usernames present in the dictionary /usr/share/metasploit-framework/data/wordlists/unix_users.txt exist on the server. Use suitable metasploit module for this task.
8. Connect to SMTP service using telnet and send a fake mail to root user.
9. Send a fake mail to root user using sendemail command.

# Walkthrough

- Ran `ifconfig` and `ping -c 1 demo.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target machine is online and pingable
	- The machines are in the same subnet
	
	<img width="915" height="432" alt="3-9  Postfix Recon Basics ifconfig" src="https://github.com/user-attachments/assets/81f08aa1-aff3-4971-888b-2a4449015ef0" />
  <img width="965" height="215" alt="3-9  Postfix Recon Basics ping" src="https://github.com/user-attachments/assets/e7a20d84-1d16-4f80-b26d-18cd4a54de25" />

- Conduct port scan with nmap, `nmap -sS -p 25,465,687 192.101.67.3 -oX victim.xml`

  <img width="814" height="335" alt="3-9  Postfix Recon Basics nmap" src="https://github.com/user-attachments/assets/4004665a-0288-4446-827b-2009e3342f49" />

- Launch and Initial set up mfsconsole

  <img width="746" height="614" alt="3-9  Postfix Recon Basics msf setup" src="https://github.com/user-attachments/assets/a5a197b1-862c-44cc-b0c8-e5d2b8fcd3bd" />

- Use `auxiliary/scanner/smtp/smtp_version` module to learn the service version on the target host. Then we can learn the SMTP server name and the banner from the screenshot below.

  <img width="1460" height="460" alt="3-9  Postfix Recon Basics version" src="https://github.com/user-attachments/assets/84ae3778-aa73-4f7c-985a-d8c3e16c027e" />

- We use `nc` to connect to the server and got the server name in the domain. And then we use `VRFY`commands to manually verify the accounts exist in the server.

  <img width="1100" height="276" alt="3-9  Postfix Recon Basics nc" src="https://github.com/user-attachments/assets/0176136e-424e-4898-8241-eaf655df70eb" />

- Connect to the server with `telnet 192.101.67.3 25` as requested by the lab instruction, though, in the case, there's no difference from our using `nc` command previously. Personally I prefer to use `nc`. And then ran `EHLO YouAreHacked,abc`, and it returned the commands allowed in the server.

  <img width="836" height="455" alt="3-9  Postfix Recon Basics EHLO" src="https://github.com/user-attachments/assets/e07841d9-6ccc-4e8e-99ea-a198ea050294" />

- Enumerate users with `smtp-user-enum` as requested by the lab instruction. Again, I hate using fancy tools in a lab instead of focus on the methodologies and use one tool if the problems can be solved with it already.

  <img width="1087" height="743" alt="3-9  Postfix Recon Basics user enum 1" src="https://github.com/user-attachments/assets/a9f93224-c331-4567-8947-86d90b87a005" />

- Finally let's get back to our msfconsole modules and use `auxiliary/scanner/smtp/smtp_enum` to enumerate users in the server

  <img width="1485" height="219" alt="3-9  Postfix Recon Basics users 2" src="https://github.com/user-attachments/assets/c1c491e1-812a-4034-930a-2d5dbca812e2" />

- Now, let's do something fun with `nc`. We are crafting a fake email like this:

  <img width="858" height="521" alt="3-9  Postfix Recon Basics fake email" src="https://github.com/user-attachments/assets/8eaf734a-f386-486b-8a94-45df12c25ca8" />

- Send another one with `sendmail` command.

  <img width="1468" height="162" alt="3-9  Postfix Recon Basics email 1" src="https://github.com/user-attachments/assets/f924ad4f-3257-4c84-9f73-3408c74a9da4" />

# Key Finds

- Too exhausted to tell any. Looking for findings in Walkthrough by yourself plz

# Tools Used

