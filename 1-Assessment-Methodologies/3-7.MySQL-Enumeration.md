---
tags:
  - lab
  - red_team
  - enumeration
  - msfconsole
  - T1046
module: Assessment Methodologies
topic: Enumeration
date: 2025-10-17
status: completed
---
# Objective

Your task is to run the following auxiliary modules against the target:

- auxiliary/scanner/mysql/mysql_version
- auxiliary/scanner/mysql/mysql_login
- auxiliary/admin/mysql/mysql_enum
- auxiliary/admin/mysql/mysql_sql
- auxiliary/scanner/mysql/mysql_file_enum
- auxiliary/scanner/mysql/mysql_hashdump
- auxiliary/scanner/mysql/mysql_schemadump
- auxiliary/scanner/mysql/mysql_writable_dirs

# Walkthrough

- Ran `ifconfig` and `ping -c 1 demo.ine.local` commands to identify the network information of the attack machine and the victim machine. Confirmed:
	- The IP addresses of both the machines
	- The target machine is online and pingable
	- The machines are in the same subnet

  <img width="930" height="464" alt="3-7  MySQL Enumeration ifconfig" src="https://github.com/user-attachments/assets/bcc0ad77-76ae-4030-bb49-5675bd1d0e9b" />
  <img width="967" height="226" alt="3-7  MySQL Enumeration ping" src="https://github.com/user-attachments/assets/4cc83b13-90bc-41cf-87e0-3b1b30d98b75" />

- Use nmap to conduct the intial port scan `nmap -sS -p 3306 192.210.52.3 -oX victim.xml`

  <img width="845" height="315" alt="3-7  MySQL Enumeration nmap" src="https://github.com/user-attachments/assets/2e268478-cfa4-4524-9ffd-df87313b393e" />

- Launch and set up msfconsole initially.

  <img width="726" height="472" alt="3-7  MySQL Enumeration msf setup" src="https://github.com/user-attachments/assets/d6bba7cd-5c63-4819-8d87-0d53296f1c82" />

- Use `auxiliary/scanner/mysql/mysql_version` to check the basic information of the service running on port 3306

  <img width="1452" height="619" alt="3-7  MySQL Enumeration mysql version" src="https://github.com/user-attachments/assets/4e5187f3-9163-4cd2-8220-9c805230cb25" />

- No related vulnerability in exploit modules found, so going to try `auxiliary/scanner/mysql/mysql_login` to see if we can get useful credentials to access it. Luckily we found the password of root.

  <img width="1374" height="492" alt="3-7  MySQL Enumeration version check" src="https://github.com/user-attachments/assets/3461e660-f18b-4342-b980-49f2fb8e258d" />
  <img width="1495" height="447" alt="3-7  MySQL Enumeration mysql login" src="https://github.com/user-attachments/assets/3ce83b37-3259-4e37-8cda-9d929e52cd68" />

- As we've got the password of root account, we can enter a new phrase and enumerate more information leveraging it. Using `auxiliary/admin/mysql/mysql_enum` to do a more completed enumeration.

  <img width="1498" height="690" alt="3-7  MySQL Enumeration mysql enum" src="https://github.com/user-attachments/assets/fc274231-0421-41dc-8c1d-f0af699ca235" />
  <img width="1494" height="741" alt="3-7  MySQL Enumeration mysql enum 2" src="https://github.com/user-attachments/assets/d5226257-92e5-47bc-8f95-313929e8ca59" />
  <img width="1442" height="685" alt="3-7  MySQL Enumeration mysql enum 3" src="https://github.com/user-attachments/assets/9c255f85-cde1-4238-bd8f-172850c3106d" />
  <img width="1395" height="740" alt="3-7  MySQL Enumeration mysql enum 4" src="https://github.com/user-attachments/assets/f596835c-ed3a-4845-be98-b90009dcb541" />
  
- The above screenshots provided basic info, accounts, and permissions information, and now we want to have a overal understanding of the structure of the database. So we use `auxiliary/scanner/mysql/mysql_schemadump` here

  <img width="1444" height="722" alt="3-7  MySQL Enumeration schema dump" src="https://github.com/user-attachments/assets/9bfca79d-dd2d-44e9-ba88-c17ad9ab5d7a" />

- There are couple of databases but all of them are empty. Now we can use `auxiliary/scanner/mysql/mysql_hashdump` to check if we can get other user's password hash, which would be valuable for pivot.

  <img width="1373" height="415" alt="3-7  MySQL Enumeration hash dump" src="https://github.com/user-attachments/assets/739fe3f0-a039-435e-b537-99397f1c9960" />
  <img width="1494" height="682" alt="3-7  MySQL Enumeration creds now" src="https://github.com/user-attachments/assets/2dbc05f5-e0af-4a8e-afaf-29da7606a7ca" />

- Now, we are considering of we can enter system level through the database access we've got. A classic method is uploading a webshell into the server. So we are using `auxiliary/scanner/mysql/mysql_writable_dirs` to check if there are any potential entry point we can use to take advantage.

  <img width="1508" height="745" alt="3-7  MySQL Enumeration writable directory" src="https://github.com/user-attachments/assets/fa7f2467-135f-448c-abdc-fd076521ba88" />

- Next, we also want to find any interesting files in the server with `auxiliary/scanner/mysql/mysql_file_enum`

  <img width="1492" height="607" alt="3-7  MySQL Enumeration file enum" src="https://github.com/user-attachments/assets/ab0cdd10-7649-4236-adb0-a6ae03eafc8d" />

- As in the previous step, we only found empty databases on the host, so basically we have no needs to execute SQL queries. However for practice purpose, we can still try `auxiliary/admin/mysql/mysql_sql` here

  <img width="1284" height="534" alt="3-7  MySQL Enumeration sql execution" src="https://github.com/user-attachments/assets/8b43edbf-3cee-4700-a395-87d101ca4415" />

# Key Finds

- The MySQL Server version is 5.5.61 and the service is running on port 3306. We fount the password of root is `twinkle`
- We knew basic information about the database including the OS version, the architecture, the accounts and permissions, etc
- We found several empty databases in the MySQL Server
- We dumped extra usernames and password hashes, which could be cracked later for permission escalation and lateral movement
- We found a writable directory, `/tmp, in the server, which allows us to upload malicious codes for persistence and permission escalation
- We find other interested directories and files in the server, where we might find information from them after we move to the system level.
